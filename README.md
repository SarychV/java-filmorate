# java-filmorate

## Используемые технологии, инструменты, библиотеки

Java SE, Spring Boot, Spring JDBC (JdbcTemplate), Lombok, JUnit5, H2 database, Apache Maven

## Общие сведения

Фильмов много — и с каждым годом становится всё больше. Чем их больше, тем больше разных оценок. Чем больше оценок, 
тем сложнее сделать выбор. Однако не время сдаваться!

Приложение java-filmorate представляет сервис, предназначенный для работы с фильмами и оценками пользователей,
а также для подготовки списка топ-5 фильмов, рекомендованных к просмотру. Пользователи сервиса имеют возможность 
отметить понравившиеся фильмы, а также познакомиться с фильмами, популярными у других пользователей, 
завести себе друзей.
 
Приложение представляет собой веб-сервис. API сервиса построено с применением принципов REST. Функционал программы 
реализован с использованием Spring Boot, который обеспечивает взаимодействие REST-контроллеров, бизнес-логики 
(сервисов) и хранилищ (репозиториев). Репозитории реализуют интерфейсы к СУБД. Доступ к базе данных осуществляется 
с использованием Spring JDBC (JdbcTemplate).

Основу модели данных приложения составляют классы:
- User, пользователи приложения, вносить в базу фильмы, ставить отметку о том, понравился ли им фильм, заводить друзей;
- Film, фильмы с описанием и некоторыми характеристиками (такими, как длительность, дата выпуска и т.п.);
- Genre, испольуется для описания жанров фильмов;
- Rating, рейтитинг MPA (Ассоциации кинокомпаний), 
которые расположены в java-пакете ru.yandex.practicum.filmorate.model.

Для обработки запросов пользователей созданы в пакете ru.yandex.practicum.filmorate.controller контроллеры:
- FilmController, содержит эндпойнты для CRUD-операций с фильмами и для проставления удаления лайков к фильмам;
- UserController, содержит эндпойнты для CRUD-операций с пользователями и создания дружеских отношений;
- MpaGenreController, содержит эндпойнты для получения информации о рейтингах и жанрах.

Для соответствующих контроллеров разработаны сервисные классы, которые расположены в пакете 
ru.yandex.practicum.filmorate.service. Через сервисные классы осуществляется обращения к классам, представляющим 
уровень доступа к данным, которые хранятся в пакете ru.yandex.practicum.filmorate.storage.

## Описание структуры базы данных

Хранение данных выполняется в базе данных, сущности и связи которой представлены на диаграмме:

![Структура базы данных приложения](FilmorateERDiagram.jpg)

На диаграмме таблицы users, films, genres и ratings представляют множества сущностей 
для пользователей, фильмов, жанров и рейтингов соответственно. 

Таблица users имеет следующие атрибуты:
* первичный ключ id - идентификатор пользователя сервиса;
* name - имя пользователя;
* login - логин пользователя;
* email - адрес электронной почты пользователя (должен иметь соответствующий формат);
* birthday - дата рождения пользователя.

Атрибуты таблицы films следующие:
* первичный ключ id - идентификатор фильма;
* name - название фильма;
* description - описание фильма;
* release_date - дата выпуска;
* duration - длительность фильма в минутах;
* rating_id - идентификатор рейтинга фильма, который является внешним ключом для связи 
с таблицей ratings.

Атрибуты таблицы genres:
* первичный ключ id - идентификатор жанра;
* name - название жанра.

Таблица ratings имеет следующие атрибуты:
* первичный ключ id;
* name - рейтинг MPA (Ассоциации кинокомпаний).

Таблица friendship реализует связь между пользователями, являющимися друзьями или когда один
предлагает дружбу другому (внешние ключи user_id и friend_id представляют идентификаторы 
соответствующих пользователей, причем когда пользователь предлагает дружбу, он вносится в поле
user_id, а кому предлагают дружбу - в friend_id). Автоматический первичный ключ id используется 
во время создания таблицы.

Таблица likes реализует связь, указывающую на проставление пользователем лайка понравившемуся
фильму. Для связи используются идентификаторы пользователя(user_id) и фильма(film_id), 
являющиеся внешними ключами. Идентификаторы user_id и film_id являются составным первичным ключом 
таблицы likes.

Для реализации связи между фильмами и жанрами используется таблица film_genre. Атрибуты 
с идентификаторами фильма(film_id) и жанра(genre_id) являются внешними ключами. Идентификаторы 
film_id и genre_id являются составным первичным ключом таблицы film_genre.

## Тестирование

Для тестирования приложения использовались postman-тесты (файл postman/sprint11.json). Часть функциональнасти 
тестировалась модульными тестами с использованием JUnit5.
